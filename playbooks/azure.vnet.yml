- name: Deploy a default VNet in Azure
  hosts: localhost
  tasks:
    # - name: Install collection
    #   community.general.ansible_galaxy_install:
    #     type: collection
    #     name: azure.azcollection

    # - name: Install Azure Requirements using pip
    #   ansible.builtin.pip:
    #     requirements: ~/.ansible/collections/ansible_collections/azure/azcollection/requirements.txt

    - name: Create a resource group
      azure.azcollection.azure_rm_resourcegroup:
        name: ansible
        location: eastus

    - name: Create a virtual network
      azure.azcollection.azure_rm_virtualnetwork:
        resource_group: ansible
        name: vnet
        address_prefixes: "10.0.0.0/24"
        location: eastus
